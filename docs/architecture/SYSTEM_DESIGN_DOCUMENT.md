# å’æ¥­ç ”ç©¶ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#1-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#2-ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [cloneAI ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](#3-cloneai-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«)
4. [experiment-ui ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](#4-experiment-ui-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«)
5. [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#5-ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)
6. [APIä»•æ§˜](#6-apiä»•æ§˜)
7. [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«](#7-ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)
8. [è¨­å®šãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼](#8-è¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼)
9. [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#9-ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
10. [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ](#10-ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ)
11. [æ ¡é–²ãƒ»æ¤œè¨¼çµæœ](#11-æ ¡é–²æ¤œè¨¼çµæœ)

---

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ç ”ç©¶ç›®çš„

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€**å€‹äººã®ã‚¯ãƒ­ãƒ¼ãƒ³AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**ã‚’æ§‹ç¯‰ã—ã€ãã®ã€Œæœ¬äººã‚‰ã—ã•ã€ã‚’è©•ä¾¡ã™ã‚‹å®Ÿé¨“ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

### 1.2 ç ”ç©¶ä»®èª¬

ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆCondition: Pï¼‰ã¯ã€æ±ç”¨çš„ãªAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆCondition: Gï¼‰ã¨æ¯”è¼ƒã—ã¦ã€ä»¥ä¸‹ã®ç‚¹ã§å„ªã‚ŒãŸè©•ä¾¡ã‚’å¾—ã‚‰ã‚Œã‚‹ï¼š
- **Identityï¼ˆæœ¬äººã‚‰ã—ã•ï¼‰**: ã‚ˆã‚Šã€Œæœ¬äººã‚‰ã—ã„ã€ã¨èªè­˜ã•ã‚Œã‚‹
- **Naturalnessï¼ˆè‡ªç„¶ã•ï¼‰**: ã‚ˆã‚Šäººé–“çš„ãªå¿œç­”ã¨æ„Ÿã˜ã‚‰ã‚Œã‚‹
- **Offensivenessï¼ˆä¸å¿«æ„Ÿï¼‰**: é•å’Œæ„Ÿã‚„ä¸å¿«æ„ŸãŒå°‘ãªã„

### 1.3 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
å’ç ”/
â”œâ”€â”€ cloneAI/          # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: ã‚¯ãƒ­ãƒ¼ãƒ³AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…
â”œâ”€â”€ experiment-ui/    # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: å®Ÿé¨“ç”¨Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â””â”€â”€ SYSTEM_DESIGN_DOCUMENT.md  # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

### 1.4 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ |
|---------|------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | Next.js 16, React 19, TypeScript, Tailwind CSS 4 |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | Python 3.x |
| LLM | Ollama (gemma3:1b) |
| å¤–éƒ¨API | Limitless Developer API (ãƒ©ã‚¤ãƒ•ãƒ­ã‚°å–å¾—) |
| ãƒ†ã‚¹ãƒˆ | pytest, requests-mock |

---

## 2. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®Ÿé¨“å‚åŠ è€…                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    experiment-ui (Next.js)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ExperimentFlow â”‚  â”‚ChatInterface â”‚  â”‚ Evaluation Form   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                â”‚                    â”‚               â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                            â–¼                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚              â”‚   API Route (/api/*)    â”‚                        â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      cloneAI (Python)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ AIPersonaAgent  â”‚  â”‚  PersonaTemplate â”‚  â”‚  MemoryManager â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                    â”‚                    â”‚           â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                â–¼                                â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚              â”‚        OllamaClient        â”‚                    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Ollama Server â”‚                      â”‚ Limitless API     â”‚   â”‚
â”‚  â”‚ (localhost)   â”‚                      â”‚ (Lifelog)         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®è²¬å‹™

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | è²¬å‹™ |
|--------------|------|
| experiment-ui | å®Ÿé¨“ãƒ•ãƒ­ãƒ¼ã®åˆ¶å¾¡ã€UIæä¾›ã€ãƒ‡ãƒ¼ã‚¿åé›† |
| cloneAI | ãƒšãƒ«ã‚½ãƒŠãƒ™ãƒ¼ã‚¹ã®å¿œç­”ç”Ÿæˆã€æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã®å¯è¦–åŒ– |
| Limitless API | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ©ã‚¤ãƒ•ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆå°†æ¥çš„ãªãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºç”¨ï¼‰ |

---

## 3. cloneAI ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### 3.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
cloneAI/
â”œâ”€â”€ clone_agentAI.py      # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…
â”œâ”€â”€ chat_param_test.py    # AIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°GUIãƒ„ãƒ¼ãƒ«
â”œâ”€â”€ ç¦äº•è–AIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼.json  # æœ€é©åŒ–æ¸ˆã¿ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼
â”œâ”€â”€ requirements.txt      # Pythonä¾å­˜é–¢ä¿‚
â”œâ”€â”€ README.md            # ä½¿ç”¨æ–¹æ³•
â”œâ”€â”€ src/
â”‚   â””â”€â”€ limitless_api/    # Limitless API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ lifelog_client.py
â””â”€â”€ tests/
    â”œâ”€â”€ conftest.py
    â”œâ”€â”€ test_lifelog_client.py
    â””â”€â”€ data/
        â””â”€â”€ lifelogs_sample.json
```

### 3.2 ä¸»è¦ã‚¯ãƒ©ã‚¹è©³ç´°

#### 3.2.1 ThoughtFlow ã‚¯ãƒ©ã‚¹

**ç›®çš„**: AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¨˜éŒ²ãƒ»å¯è¦–åŒ–

```python
class ThoughtFlow:
    """æ€è€ƒãƒ•ãƒ­ãƒ¼ã‚’è¨˜éŒ²ã™ã‚‹ã‚¯ãƒ©ã‚¹"""
    
    def __init__(self):
        self.thoughts: List[Dict[str, str]] = []
    
    def add_thought(self, thought: str, category: str = "general") -> None
    def get_thoughts(self) -> List[Dict[str, str]]
    def get_thought_summary(self) -> str
```

**ã‚«ãƒ†ã‚´ãƒªä¸€è¦§**:
| ã‚«ãƒ†ã‚´ãƒª | èª¬æ˜ |
|---------|------|
| `input` | ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®å—ä¿¡ |
| `thinking` | æ€è€ƒãƒ»åˆ†æãƒ—ãƒ­ã‚»ã‚¹ |
| `process` | å‡¦ç†ãƒ»ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰ |
| `api` | LLM APIã¨ã®é€šä¿¡ |
| `error` | ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ |

#### 3.2.2 LLMClient æŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹

```python
class LLMClient:
    """LLMãƒ¢ãƒ‡ãƒ«ã¨é€šä¿¡ã™ã‚‹ãŸã‚ã®æŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹"""
    def generate(self, prompt: str) -> str:
        raise NotImplementedError
```

#### 3.2.3 OllamaClient ã‚¯ãƒ©ã‚¹

**ç›®çš„**: Ollamaãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã¨ã®é€šä¿¡

```python
class OllamaClient(LLMClient):
    def __init__(self, 
                 model_name: str = "gemma3:1b", 
                 base_url: str = "http://localhost:11434/api"):
        self.model_name = model_name
        self.base_url = base_url
        self.simulation_mode = False
    
    def generate(self, prompt: str) -> str
    def _simulate_generation(self, prompt: str) -> str  # ãƒ†ã‚¹ãƒˆç”¨ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    def _real_generate(self, prompt: str) -> str        # å®Ÿéš›ã®APIå‘¼ã³å‡ºã—
    def set_simulation_mode(self, enabled: bool) -> None
```

**ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ¼ãƒ‰**: Ollamaã‚µãƒ¼ãƒãƒ¼ãŒåˆ©ç”¨ä¸å¯ã®å ´åˆã€äº‹å‰å®šç¾©ã•ã‚ŒãŸå¿œç­”ã‚’è¿”ã™

#### 3.2.4 PersonaTemplate ã‚¯ãƒ©ã‚¹

**ç›®çš„**: ç‰¹å®šäººç‰©ã®ãƒšãƒ«ã‚½ãƒŠã‚’å®šç¾©

```python
class PersonaTemplate:
    def __init__(self,
                 name: str,
                 description: str,
                 traits: Dict[str, Any] = None,
                 background: str = None,
                 personality: str = None,
                 speech_style: str = None,
                 knowledge_areas: List[str] = None,
                 values: List[str] = None):
        ...
    
    def to_prompt(self) -> str  # ãƒšãƒ«ã‚½ãƒŠã‚’LLMãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å¤‰æ›
```

**ãƒšãƒ«ã‚½ãƒŠå±æ€§**:
| å±æ€§ | èª¬æ˜ | ä¾‹ |
|-----|------|-----|
| `name` | åå‰ | "ç¦äº•è–" |
| `description` | åŸºæœ¬èª¬æ˜ | "21æ­³ã®æ—¥æœ¬äººå¤§å­¦ç”Ÿ..." |
| `traits` | å€‹äººçš„ç‰¹å¾´ï¼ˆè¾æ›¸ï¼‰ | {"å£ç™–": "ãŸã—ã‹ã«..."} |
| `background` | çµŒæ­´ãƒ»èƒŒæ™¯ | å¹´é½¢ã€å±…ä½åœ°ã€å­¦æ­´ãªã© |
| `personality` | æ€§æ ¼ç‰¹æ€§ | ENFPã€ãƒ“ãƒƒã‚°ãƒ•ã‚¡ã‚¤ãƒ–ã‚¹ã‚³ã‚¢ |
| `speech_style` | è©±ã—æ–¹ã®ç‰¹å¾´ | "ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã§ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼" |
| `knowledge_areas` | å°‚é–€çŸ¥è­˜åˆ†é‡ | ["Python", "æ©Ÿæ¢°å­¦ç¿’"] |
| `values` | ä¾¡å€¤è¦³ãƒ»ä¿¡æ¡ | ["å¥½å¥‡å¿ƒãŒå…¨ã¦", "é¢ç™½ãç”Ÿãã‚‹"] |

#### 3.2.5 MemoryManager ã‚¯ãƒ©ã‚¹

**ç›®çš„**: ä¼šè©±å±¥æ­´ã¨é‡è¦æƒ…å ±ã®ç®¡ç†

```python
class MemoryManager:
    def __init__(self, max_history: int = 10):
        self.conversation_history: List[Dict[str, str]] = []
        self.key_facts: Dict[str, Any] = {}
        self.max_history = max_history
    
    def add_interaction(self, user_input: str, agent_response: str) -> None
    def add_fact(self, key: str, value: Any) -> None
    def get_history_as_text(self, num_entries: Optional[int] = None) -> str
```

**å±¥æ­´ã‚¨ãƒ³ãƒˆãƒªæ§‹é€ **:
```python
{
    "user": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè¨€",
    "agent": "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å¿œç­”",
    "timestamp": "2024-12-09 10:30:00"
}
```

#### 3.2.6 AIPersonaAgent ã‚¯ãƒ©ã‚¹

**ç›®çš„**: ãƒ¡ã‚¤ãƒ³ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ - å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®çµ±åˆ

```python
class AIPersonaAgent:
    def __init__(self,
                 persona: PersonaTemplate,
                 model_name: str = "gemma3:1b",
                 simulation_mode: bool = False):
        self.persona = persona
        self.client = OllamaClient(model_name)
        self.thought_flow = ThoughtFlow()
        self.memory = MemoryManager()
    
    def process_input(self, user_input: str) -> str  # ãƒ¡ã‚¤ãƒ³å‡¦ç†
    def _build_prompt(self, user_input: str) -> str  # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰
    def _analyze_response(self, response: str, user_input: str) -> str  # å¿œç­”åˆ†æ
    def get_thought_process(self) -> List[Dict[str, str]]
    def get_thought_summary(self) -> str
    def reset_conversation(self) -> None
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å—ä¿¡ â†’ æ€è€ƒè¨˜éŒ²
2. å…¥åŠ›æ„å›³åˆ†æï¼ˆè³ªå•æ¤œå‡ºã€æŒ¨æ‹¶æ¤œå‡ºï¼‰
3. ãƒšãƒ«ã‚½ãƒŠæƒ…å ± + ä¼šè©±å±¥æ­´ã‹ã‚‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰
4. LLMã¸å•ã„åˆã‚ã›
5. å¿œç­”åˆ†æãƒ»å“è³ªãƒã‚§ãƒƒã‚¯
6. ãƒšãƒ«ã‚½ãƒŠã®å£ç™–ã‚’ç¢ºç‡çš„ã«è¿½åŠ 
7. ä¼šè©±å±¥æ­´æ›´æ–°
8. æœ€çµ‚å¿œç­”è¿”å´

### 3.3 ç¦äº•è–ãƒšãƒ«ã‚½ãƒŠè©³ç´°

`create_yamada_taro_persona()` é–¢æ•°ã§å®šç¾©ã•ã‚Œã‚‹è©³ç´°ãªãƒšãƒ«ã‚½ãƒŠ:

```python
PersonaTemplate(
    name="ç¦äº•è–",
    description="21æ­³ã®æ—¥æœ¬äººå¤§å­¦ç”Ÿã€‚å¤§é˜ªå›½éš›å·¥ç§‘å°‚é–€è·å¤§å­¦ã®3å›ç”Ÿã§ã€
                 æƒ…å ±å·¥å­¦ç§‘ã§AIæˆ¦ç•¥ã‚³ãƒ¼ã‚¹ã‚’å°‚æ”»ã€‚",
    traits={
        "å£ç™–": "ãŸã—ã‹ã«...",
        "å¥½ããªè¨€èª": "Pythonã€TypeScript",
        "è¶£å‘³": "ç­‹ãƒˆãƒ¬ã€ã‚²ãƒ¼ãƒ ã€Youtubeã€è‡ªå·±å•“ç™ºæ›¸ã‚’èª­ã‚€ã“ã¨",
        # ... 50ä»¥ä¸Šã®è©³ç´°ãªç‰¹å¾´
    },
    background="""
        å¹´é½¢ï¼š21æ­³
        æ€§åˆ¥ï¼šç”·
        å±…ä½åœ°ï¼šå¤§é˜ªåºœå…«å°¾å¸‚
        è·æ¥­ï¼šå¤§å­¦3å¹´ç”Ÿ
        å­¦æ­´ï¼šå¤§é˜ªå›½éš›å·¥ç§‘å°‚é–€è·å¤§å­¦å·¥ç§‘å­¦éƒ¨æƒ…å ±å·¥å­¦ç§‘AIæˆ¦ç•¥ã‚³ãƒ¼ã‚¹
        å®¶æ—æ§‹æˆï¼šé•·ç”·ã€5äººå®¶æ—
        # ...
    """,
    personality="""
        æ€§æ ¼ç‰¹æ€§ï¼šENFP
        ãƒ“ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ–:
        - å¤–å‘æ€§ï¼š57
        - ç¥çµŒè³ªï¼š29
        - é–‹æ”¾æ€§ï¼š68
        - å”èª¿æ€§ï¼š48
        - èª å®Ÿæ€§ï¼š34
        # ...
    """,
    speech_style="ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã§ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªå£èª¿",
    knowledge_areas=["ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é–‹ç™º", "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ", "ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¤ãƒ³ãƒ•ãƒ©", "æ©Ÿæ¢°å­¦ç¿’"],
    values=["å¥½å¥‡å¿ƒãŒå…¨ã¦", "é¢ç™½ãç”Ÿãã‚‹ã“ã¨", "æœ¬è³ªã‚’é‡è¦–"]
)
```

### 3.4 LLMå‘¼ã³å‡ºã— - Ollama

**ç›®çš„**: ãƒ­ãƒ¼ã‚«ãƒ«LLMï¼ˆOllamaï¼‰ã‚’ä½¿ç”¨ã—ã¦ã‚¯ãƒ­ãƒ¼ãƒ³AIã®å¿œç­”ã‚’ç”Ÿæˆã™ã‚‹ã€‚

cloneAIå´ã®å®Ÿè£…ã¯ `clone_agentAI.py` ã® Ollama ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```python
ollama.chat(
    model="gemma3:1b",
    messages=[
        {"role": "system", "content": "ã‚ãªãŸã¯ç¦äº•è–ã§ã™...ï¼ˆè©³ç´°ãªãƒšãƒ«ã‚½ãƒŠï¼‰"},
        {"role": "user", "content": "ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›"},
    ],
)
```

### 3.5 chat_param_test.py - AIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãƒãƒ¥ãƒ¼ãƒŠãƒ¼

**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã‹ã‚‰AIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æœ€é©åŒ–ã™ã‚‹GUIãƒ„ãƒ¼ãƒ«

```python
class AIParameterTuner:
    """
    30å•ã®ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã«åŸºã¥ã„ã¦LLMãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’è¨ˆç®—
    
    è¨ˆç®—ã•ã‚Œã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼:
    - temperature (0.0-2.0): å‰µé€ æ€§/ãƒ©ãƒ³ãƒ€ãƒ æ€§
    - top_p (0.0-1.0): ãƒˆãƒ¼ã‚¯ãƒ³é¸æŠã®å¤šæ§˜æ€§
    - presence_penalty (-2.0-2.0): è©±é¡Œã®ç¹°ã‚Šè¿”ã—æŠ‘åˆ¶
    - frequency_penalty (-2.0-2.0): å˜èªã®ç¹°ã‚Šè¿”ã—æŠ‘åˆ¶
    - num_ctx (1024-4096): ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆé•·
    - repeat_penalty (1.0-2.0): ç¹°ã‚Šè¿”ã—æŠ‘åˆ¶
    - mirostat_mode (0-2): æ–‡ç« è¤‡é›‘ã•åˆ¶å¾¡
    - max_tokens (500-2000): å¿œç­”æœ€å¤§é•·
    - jargon_level (1-5): å°‚é–€ç”¨èªä½¿ç”¨åº¦
    - formality_level (1-5): ãƒ•ã‚©ãƒ¼ãƒãƒ«åº¦
    - abstraction_level (1-5): æŠ½è±¡/å…·ä½“åº¦
    """
```

**è³ªå•ã‚«ãƒ†ã‚´ãƒª**:
1. åŸºæœ¬çš„ãªç‰¹æ€§ã«é–¢ã™ã‚‹è³ªå• (Q1-3)
2. Temperatureèª¿æ•´ã®ãŸã‚ã®è³ªå• (Q4-5)
3. å‰µé€ æ€§ã¨äºˆæ¸¬å¯èƒ½æ€§ã«é–¢ã™ã‚‹è³ªå• (Q6-8)
4. æ–‡è„ˆç†è§£ã®æ·±ã•ã«é–¢ã™ã‚‹è³ªå• (Q9-10)
5. ç¹°ã‚Šè¿”ã—ã¨ä¸€è²«æ€§ã«é–¢ã™ã‚‹è³ªå• (Q11-12)
6. åˆ¶å¾¡æ€§ã¨å¤šæ§˜æ€§ã®ãƒãƒ©ãƒ³ã‚¹ã«é–¢ã™ã‚‹è³ªå• (Q13-14)
7. Top_pèª¿æ•´ã®ãŸã‚ã®è³ªå• (Q15-16)
8. Presence/Frequency Penaltyèª¿æ•´ã®ãŸã‚ã®è³ªå• (Q17-18)
9. Logit_biasèª¿æ•´ã®ãŸã‚ã®è³ªå• (Q19-21)
10. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç‰¹æ€§æŠŠæ¡ã®ãŸã‚ã®è³ªå• (Q22-27)
11. ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«é–¢ã™ã‚‹è³ªå• (Q28-30)

### 3.6 Limitless API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

#### 3.6.1 LifelogClient ã‚¯ãƒ©ã‚¹

**ç›®çš„**: Limitless APIã‹ã‚‰ãƒ©ã‚¤ãƒ•ãƒ­ã‚°ã‚’å–å¾—

```python
class LifelogClient:
    _PATH_LIFELOGS = "/v1/lifelogs"
    
    def __init__(self,
                 api_key: str,
                 base_url: str = "https://api.limitless.ai",
                 session: Optional[requests.Session] = None,
                 timeout: float = 30.0):
        ...
    
    def list_lifelogs(self, **params: Any) -> Tuple[List[LifelogEntry], Optional[str]]:
        """
        ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã§ãƒ©ã‚¤ãƒ•ãƒ­ã‚°ã‚’å–å¾—
        
        Parameters:
            limit: å–å¾—ä»¶æ•° (1-10)
            date: ISOæ—¥ä»˜ (ä¾‹: "2024-09-17")
            start: é–‹å§‹æ™‚åˆ»
            end: çµ‚äº†æ™‚åˆ»
            timezone: ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ (ä¾‹: "Asia/Tokyo")
            cursor: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ã‚½ãƒ«
        
        Returns:
            (entries, next_cursor): ã‚¨ãƒ³ãƒˆãƒªãƒªã‚¹ãƒˆã¨æ¬¡ãƒšãƒ¼ã‚¸ã‚«ãƒ¼ã‚½ãƒ«
        
        Raises:
            RateLimitError: ãƒ¬ãƒ¼ãƒˆåˆ¶é™æ™‚ (429)
            ApiError: ãã®ä»–ã®APIã‚¨ãƒ©ãƒ¼
        """
```

#### 3.6.2 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```python
@dataclass
class LifelogEntry:
    id: str                    # ä¸€æ„è­˜åˆ¥å­
    title: str                 # ã‚¨ãƒ³ãƒˆãƒªã‚¿ã‚¤ãƒˆãƒ«
    start_time: datetime       # é–‹å§‹æ™‚åˆ»
    end_time: datetime         # çµ‚äº†æ™‚åˆ»
    is_starred: bool           # ã‚¹ã‚¿ãƒ¼ä»˜ããƒ•ãƒ©ã‚°
    updated_at: datetime       # æ›´æ–°æ—¥æ™‚
    markdown: Optional[str]    # Markdownå½¢å¼ã®ã‚µãƒãƒªãƒ¼
    contents: List[Dict]       # æ§‹é€ åŒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
```

#### 3.6.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```python
class ApiError(Exception):
    """åŸºæœ¬APIã‚¨ãƒ©ãƒ¼"""
    def __init__(self, message: str, status_code: int, payload: Optional[Dict] = None):
        self.message = message
        self.status_code = status_code
        self.payload = payload or {}

class RateLimitError(ApiError):
    """ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚¨ãƒ©ãƒ¼ï¼ˆ429ï¼‰"""
    def __init__(self, message: str, status_code: int, 
                 retry_after: Optional[int] = None, payload: Optional[Dict] = None):
        super().__init__(message, status_code, payload)
        self.retry_after = retry_after  # å†è©¦è¡Œã¾ã§ã®ç§’æ•°
```

#### 3.6.4 CLI ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```bash
# åŸºæœ¬ä½¿ç”¨
python -m limitless_api.lifelog_client --limit 5 --timezone Asia/Tokyo

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³
--api-key     APIã‚­ãƒ¼ï¼ˆç’°å¢ƒå¤‰æ•° LIMITLESS_API_KEY ãŒæ—¢å®šï¼‰
--base-url    APIãƒ™ãƒ¼ã‚¹URL
--limit       å–å¾—ä»¶æ•° (1-10)
--date        ISOæ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
--start       é–‹å§‹æ™‚åˆ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
--end         çµ‚äº†æ™‚åˆ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
--timezone    ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³
--cursor      ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ã‚½ãƒ«
```

---

## 4. experiment-ui ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### 4.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
experiment-ui/
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ next.config.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ postcss.config.mjs
â”œâ”€â”€ eslint.config.mjs
â”œâ”€â”€ public/
â””â”€â”€ src/
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ globals.css
    â”‚   â”œâ”€â”€ layout.tsx
    â”‚   â”œâ”€â”€ page.tsx              # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
    â”‚   â”œâ”€â”€ api/
    â”‚   â”‚   â””â”€â”€ limitless/
    â”‚   â”‚       â””â”€â”€ route.ts      # Limitless APIãƒ—ãƒ­ã‚­ã‚·
    â”‚   â””â”€â”€ limitless-test/
    â”‚       â””â”€â”€ page.tsx          # APIãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸
    â”œâ”€â”€ components/
    â”‚   â”œâ”€â”€ ChatInterface.tsx     # ãƒãƒ£ãƒƒãƒˆUI
    â”‚   â””â”€â”€ ExperimentFlow.tsx    # å®Ÿé¨“ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡
    â””â”€â”€ lib/
        â”œâ”€â”€ experiment-state.ts   # çŠ¶æ…‹å®šç¾©
        â””â”€â”€ utils.ts              # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
```

### 4.2 çŠ¶æ…‹ç®¡ç† (experiment-state.ts)

#### 4.2.1 å®Ÿé¨“ãƒ•ã‚§ãƒ¼ã‚º

```typescript
export type ExperimentPhase =
    | 'CONSENT'              // åŒæ„ç”»é¢
    | 'INSTRUCTION'          // èª¬æ˜ç”»é¢
    | 'SESSION_FREE_CHAT'    // ã‚»ãƒƒã‚·ãƒ§ãƒ³1: é›‘è«‡
    | 'SESSION_KNOWLEDGE_PROBE'  // ã‚»ãƒƒã‚·ãƒ§ãƒ³2: è¨˜æ†¶ã®ç¢ºèª
    | 'SESSION_MORAL_CHOICE'     // ã‚»ãƒƒã‚·ãƒ§ãƒ³3: ä¾¡å€¤è¦³ã®å…±æœ‰
    | 'SESSION_STYLISTIC'        // ã‚»ãƒƒã‚·ãƒ§ãƒ³4: å‰µä½œãƒ»å¤§å–œåˆ©
    | 'EVALUATION'           // è©•ä¾¡ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ
    | 'DEBRIEFING';          // çµ‚äº†ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
```

#### 4.2.2 å®Ÿé¨“æ¡ä»¶

```typescript
export type Condition = 'G' | 'P';
// G = Generic (æ±ç”¨AI)
// P = Personalized (ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºAI)
```

#### 4.2.3 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹

```typescript
export interface Message {
    id: string;           // ä¸€æ„è­˜åˆ¥å­
    role: 'user' | 'assistant';
    content: string;      // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹
    timestamp: number;    // Unixã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
}
```

#### 4.2.4 å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿å‹

```typescript
export interface ExperimentData {
    condition: Condition;     // å®Ÿé¨“æ¡ä»¶ (G/P)
    startTime: number;        // é–‹å§‹æ™‚åˆ»
    endTime?: number;         // çµ‚äº†æ™‚åˆ»
    sessions: {
        [key in ExperimentPhase]?: {
            messages: Message[];  // ä¼šè©±å±¥æ­´
            duration: number;     // ã‚»ãƒƒã‚·ãƒ§ãƒ³æ‰€è¦æ™‚é–“
        };
    };
    evaluation?: {
        identity: number;     // æœ¬äººã‚‰ã—ã• (1-7)
        naturalness: number;  // è‡ªç„¶ã• (1-7)
        offensiveness: number; // ä¸å¿«æ„Ÿ (1-7)
        comments?: string;    // è‡ªç”±è¨˜è¿°ã‚³ãƒ¡ãƒ³ãƒˆ
    };
}
```

### 4.3 ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ (page.tsx)

**è²¬å‹™**: å®Ÿé¨“å…¨ä½“ã®çŠ¶æ…‹ç®¡ç†ã¨ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡

```typescript
export default function Home() {
    const [phase, setPhase] = useState<ExperimentPhase>('CONSENT');
    const [data, setData] = useState<ExperimentData>({
        condition: 'G',
        startTime: Date.now(),
        sessions: {}
    });

    useEffect(() => {
        // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§æ¡ä»¶ã‚’ãƒ©ãƒ³ãƒ€ãƒ å‰²ã‚Šå½“ã¦
        const condition: Condition = Math.random() > 0.5 ? 'P' : 'G';
        setData(prev => ({ ...prev, condition }));
    }, []);

    const handlePhaseComplete = (phaseData?: any) => {
        // ãƒ•ã‚§ãƒ¼ã‚ºãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã€æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã¸é·ç§»
        // DEBRIEFINGå®Œäº†æ™‚ã¯ãƒ‡ãƒ¼ã‚¿ã‚’JSONã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    };

    const handleDownload = () => {
        // å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        // ãƒ•ã‚¡ã‚¤ãƒ«å: experiment_data_{condition}_{timestamp}.json
    };
}
```

### 4.4 ExperimentFlow ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**è²¬å‹™**: å„ãƒ•ã‚§ãƒ¼ã‚ºã«å¿œã˜ãŸUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æç”»

#### 4.4.1 ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ãƒ•ã‚§ãƒ¼ã‚º | èª¬æ˜ |
|--------------|---------|------|
| `ConsentScreen` | CONSENT | å‚åŠ åŒæ„å–å¾— |
| `InstructionScreen` | INSTRUCTION | å®Ÿé¨“æ‰‹é †èª¬æ˜ |
| `ChatInterface` | SESSION_* | ãƒãƒ£ãƒƒãƒˆUI |
| `EvaluationForm` | EVALUATION | 7æ®µéšè©•ä¾¡ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ |
| `DebriefingScreen` | DEBRIEFING | çµ‚äº†ãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ¡ˆå†… |

#### 4.4.2 ConsentScreen

```tsx
function ConsentScreen({ onComplete }: { onComplete: () => void }) {
    // è¡¨ç¤ºå†…å®¹:
    // - å®Ÿé¨“ç›®çš„ã®èª¬æ˜
    // - æ³¨æ„äº‹é … (æ‰€è¦æ™‚é–“ã€ãƒ‡ãƒ¼ã‚¿åŒ¿ååŒ–ã€ä¸­æ­¢æ¨©åˆ©)
    // - åŒæ„ãƒœã‚¿ãƒ³
}
```

#### 4.4.3 InstructionScreen

```tsx
function InstructionScreen({ onComplete }: { onComplete: () => void }) {
    // è¡¨ç¤ºå†…å®¹:
    // 1. ãƒãƒ£ãƒƒãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³èª¬æ˜ (4ãƒ†ãƒ¼ãƒ Ã— 5åˆ†)
    // 2. è©•ä¾¡ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆèª¬æ˜
    // - é–‹å§‹ãƒœã‚¿ãƒ³
}
```

#### 4.4.4 EvaluationForm

```tsx
interface EvaluationRatings {
    identity: number;      // 1-7 ã‚¹ã‚±ãƒ¼ãƒ«
    naturalness: number;   // 1-7 ã‚¹ã‚±ãƒ¼ãƒ«
    offensiveness: number; // 1-7 ã‚¹ã‚±ãƒ¼ãƒ«
    comments: string;      // è‡ªç”±è¨˜è¿°
}

function EvaluationForm({ onComplete }: { onComplete: (data: EvaluationRatings) => void }) {
    // è©•ä¾¡é …ç›®:
    // 1. è–ã‚‰ã—ã• (Identity): ã€Œå…¨ãé•ã†ã€ã€œã€Œã¾ã•ã«æœ¬äººã€
    // 2. è‡ªç„¶ã• (Naturalness): ã€Œæ©Ÿæ¢°çš„ã€ã€œã€Œäººé–“çš„ã€
    // 3. ä¸å¿«æ„Ÿ (Offensiveness): ã€Œãªã—ã€ã€œã€Œå¼·ã„ä¸å¿«æ„Ÿã€
    // 4. ã‚³ãƒ¡ãƒ³ãƒˆ (ä»»æ„)
}
```

### 4.5 ChatInterface ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**è²¬å‹™**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆUIã®æä¾›

```tsx
interface ChatInterfaceProps {
    messages: Message[];           // è¡¨ç¤ºã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    onSendMessage: (content: string) => void;  // é€ä¿¡ãƒãƒ³ãƒ‰ãƒ©
    isTyping: boolean;             // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¡¨ç¤º
    disabled?: boolean;            // å…¥åŠ›ç„¡åŠ¹åŒ–
}

export function ChatInterface({ messages, onSendMessage, isTyping, disabled }: ChatInterfaceProps) {
    // UIè¦ç´ :
    // - ãƒ˜ãƒƒãƒ€ãƒ¼ (AIã‚¢ãƒã‚¿ãƒ¼ã€åå‰ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹)
    // - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ (ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½)
    // - ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ (3ãƒ‰ãƒƒãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³)
    // - å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  (ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› + é€ä¿¡ãƒœã‚¿ãƒ³)
}
```

**ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: å³å¯„ã›ã€ã‚¤ãƒ³ãƒ‡ã‚£ã‚´èƒŒæ™¯
- AIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: å·¦å¯„ã›ã€ç™½èƒŒæ™¯
- ã‚¿ã‚¤ãƒ”ãƒ³ã‚°: ãƒã‚¦ãƒ³ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

### 4.6 API Route - Limitless ãƒ—ãƒ­ã‚­ã‚·

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/api/limitless/route.ts`

**ç›®çš„**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®Limitless APIå‘¼ã³å‡ºã—ã‚’ãƒ—ãƒ­ã‚­ã‚·

```typescript
export async function GET(request: NextRequest) {
    const apiKey = request.headers.get('X-Limitless-Key');
    
    if (!apiKey) {
        return NextResponse.json({ error: 'API Key is required' }, { status: 400 });
    }
    
    // Limitless APIã¸ãƒ—ãƒ­ã‚­ã‚·
    const response = await fetch('https://api.limitless.ai/v1/lifelogs?limit=5', {
        headers: { 'X-API-Key': apiKey }
    });
    
    return NextResponse.json(await response.json());
}
```

**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®**:
- APIã‚­ãƒ¼ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ãƒ˜ãƒƒãƒ€ãƒ¼ã§å—ã‘å–ã‚Šã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§è»¢é€
- ã‚­ãƒ¼ã¯ã‚µãƒ¼ãƒãƒ¼ã«ä¿å­˜ã•ã‚Œãªã„

### 4.7 Limitless ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/app/limitless-test/page.tsx`

**ç›®çš„**: Limitless APIæ¥ç¶šã®ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒ†ã‚¹ãƒˆç”¨UI

```tsx
export default function LimitlessTestPage() {
    const [apiKey, setApiKey] = useState('');
    const [data, setData] = useState<any>(null);
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState<string | null>(null);
    
    const fetchData = async () => {
        // /api/limitless ã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
    };
    
    // UI: APIã‚­ãƒ¼å…¥åŠ› + ãƒ•ã‚§ãƒƒãƒãƒœã‚¿ãƒ³ + çµæœè¡¨ç¤º
}
```

### 4.8 ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (utils.ts)

```typescript
import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

/**
 * Tailwind CSSã‚¯ãƒ©ã‚¹åã‚’çµåˆã™ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
 * clsx + tailwind-merge ã‚’çµ„ã¿åˆã‚ã›ã¦é‡è¤‡ã‚¯ãƒ©ã‚¹ã‚’é©åˆ‡ã«å‡¦ç†
 */
export function cn(...inputs: ClassValue[]) {
    return twMerge(clsx(inputs));
}
```

### 4.9 ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° (globals.css)

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 240, 242, 245;
    --background-end-rgb: 255, 255, 255;
}

body {
    /* ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ */
    background: linear-gradient(...);
    font-family: 'Inter', sans-serif;
}

/* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
```

---

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 5.1 å®Ÿé¨“å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å®Ÿé¨“é–‹å§‹                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONSENT: å‚åŠ åŒæ„å–å¾—                                           â”‚
â”‚  - å®Ÿé¨“ç›®çš„èª¬æ˜                                                  â”‚
â”‚  - æ³¨æ„äº‹é …ç¢ºèª                                                  â”‚
â”‚  - åŒæ„ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INSTRUCTION: å®Ÿé¨“æ‰‹é †èª¬æ˜                                       â”‚
â”‚  - 4ã¤ã®ãƒãƒ£ãƒƒãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³èª¬æ˜                                   â”‚
â”‚  - è©•ä¾¡ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆèª¬æ˜                                            â”‚
â”‚  - é–‹å§‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚      ãƒ©ãƒ³ãƒ€ãƒ æ¡ä»¶å‰²ã‚Šå½“ã¦        â”‚
           â”‚      (P: 50%, G: 50%)          â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                   â”‚
         â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Condition: P   â”‚                 â”‚  Condition: G   â”‚
â”‚  (Personalized) â”‚                 â”‚  (Generic)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SESSION_FREE_CHAT: é›‘è«‡ã‚»ãƒƒã‚·ãƒ§ãƒ³ (~5åˆ†)                        â”‚
â”‚  - è‡ªç”±ãªä¼šè©±                                                    â”‚
â”‚  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´è¨˜éŒ²                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SESSION_KNOWLEDGE_PROBE: è¨˜æ†¶ç¢ºèªã‚»ãƒƒã‚·ãƒ§ãƒ³ (~5åˆ†)              â”‚
â”‚  - å€‹äººçš„ãªè¨˜æ†¶ãƒ»çŸ¥è­˜ã«é–¢ã™ã‚‹è³ªå•                                â”‚
â”‚  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´è¨˜éŒ²                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SESSION_MORAL_CHOICE: ä¾¡å€¤è¦³å…±æœ‰ã‚»ãƒƒã‚·ãƒ§ãƒ³ (~5åˆ†)               â”‚
â”‚  - é“å¾³çš„ãƒ»å€«ç†çš„ãªé¸æŠã«é–¢ã™ã‚‹å¯¾è©±                              â”‚
â”‚  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´è¨˜éŒ²                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SESSION_STYLISTIC: å‰µä½œãƒ»å¤§å–œåˆ©ã‚»ãƒƒã‚·ãƒ§ãƒ³ (~5åˆ†)                â”‚
â”‚  - å‰µé€ çš„ãªã‚¿ã‚¹ã‚¯                                                â”‚
â”‚  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´è¨˜éŒ²                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EVALUATION: è©•ä¾¡ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ                                      â”‚
â”‚  - Identity (1-7): æœ¬äººã‚‰ã—ã•                                    â”‚
â”‚  - Naturalness (1-7): è‡ªç„¶ã•                                     â”‚
â”‚  - Offensiveness (1-7): ä¸å¿«æ„Ÿ                                   â”‚
â”‚  - Comments: è‡ªç”±è¨˜è¿°                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DEBRIEFING: å®Ÿé¨“çµ‚äº†                                            â”‚
â”‚  - è¬è¾è¡¨ç¤º                                                      â”‚
â”‚  - ãƒ‡ãƒ¼ã‚¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ (JSON)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Input     â”‚â”€â”€â”€â”€â–¶â”‚  ChatInterface   â”‚â”€â”€â”€â”€â–¶â”‚  ExperimentFlow  â”‚
â”‚   (ãƒ†ã‚­ã‚¹ãƒˆ)     â”‚     â”‚  onSendMessage() â”‚     â”‚  handleSend()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                            â”‚
                                                            â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚  State Update    â”‚
                                                  â”‚  messages.push() â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                            â”‚
                                                            â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚  AI Backend      â”‚
                                                  â”‚  (TODO: Connect) â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                            â”‚
                                                            â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚  Mock Response   â”‚
                                                  â”‚  (ç¾åœ¨ã®å®Ÿè£…)    â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                            â”‚
                                                            â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚  State Update    â”‚
                                                  â”‚  messages.push() â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                            â”‚
                                                            â–¼
                                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                  â”‚  UI Re-render    â”‚
                                                  â”‚  ChatInterface   â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

**ãƒ•ã‚¡ã‚¤ãƒ«å**: `experiment_data_{condition}_{timestamp}.json`

```json
{
    "condition": "P",
    "startTime": 1702108800000,
    "endTime": 1702110600000,
    "sessions": {
        "SESSION_FREE_CHAT": {
            "messages": [
                {
                    "id": "1702108900000",
                    "role": "user",
                    "content": "ã“ã‚“ã«ã¡ã¯ã€å…ƒæ°—?",
                    "timestamp": 1702108900000
                },
                {
                    "id": "1702108901000",
                    "role": "assistant",
                    "content": "ãŸã—ã‹ã«ã€å…ƒæ°—ã ã‚ˆï¼æœ€è¿‘ä½•ã—ã¦ãŸï¼Ÿ",
                    "timestamp": 1702108901000
                }
            ],
            "duration": 300000
        },
        "SESSION_KNOWLEDGE_PROBE": { ... },
        "SESSION_MORAL_CHOICE": { ... },
        "SESSION_STYLISTIC": { ... }
    },
    "evaluation": {
        "identity": 5,
        "naturalness": 6,
        "offensiveness": 2,
        "comments": "å£èª¿ãŒæœ¬äººã£ã½ã‹ã£ãŸ"
    }
}
```

---

## 6. APIä»•æ§˜

### 6.1 å†…éƒ¨API (Next.js Route)

#### GET /api/limitless

**ç›®çš„**: Limitless API ã¸ã®ãƒ—ãƒ­ã‚­ã‚·

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```
GET /api/limitless
Headers:
  X-Limitless-Key: <api_key>
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ (æˆåŠŸ)**:
```json
{
    "lifelogs": [
        {
            "id": "log_123",
            "title": "Morning standup",
            "startTime": "2024-09-17T00:00:00.000Z",
            "endTime": "2024-09-17T00:15:00.000Z",
            "isStarred": false,
            "markdown": "## Morning standup\n- discussed sprint goals",
            "contents": [...]
        }
    ],
    "nextCursor": null
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ (ã‚¨ãƒ©ãƒ¼)**:
```json
{
    "error": "API Key is required"
}
```

### 6.2 å¤–éƒ¨API

#### Limitless API

**ãƒ™ãƒ¼ã‚¹URL**: `https://api.limitless.ai`

**èªè¨¼**: ãƒ˜ãƒƒãƒ€ãƒ¼ `X-API-Key: <api_key>`

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:

| ãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ‘ã‚¹ | èª¬æ˜ |
|---------|------|------|
| GET | /v1/lifelogs | ãƒ©ã‚¤ãƒ•ãƒ­ã‚°ä¸€è¦§å–å¾— |

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼**:
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ | å‹ | èª¬æ˜ |
|------------|-----|------|
| limit | int | å–å¾—ä»¶æ•° (1-10) |
| date | string | ISOæ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ |
| start | string | é–‹å§‹æ™‚åˆ» (ISO8601) |
| end | string | çµ‚äº†æ™‚åˆ» (ISO8601) |
| timezone | string | ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ |
| cursor | string | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ |

**ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰**:
| ã‚³ãƒ¼ãƒ‰ | èª¬æ˜ |
|-------|------|
| 400 | ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ |
| 401 | èªè¨¼å¤±æ•— |
| 429 | ãƒ¬ãƒ¼ãƒˆåˆ¶é™ |
| 500 | ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ |

#### Ollama API

**ãƒ™ãƒ¼ã‚¹URL**: `http://localhost:11434/api`

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:

| ãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ‘ã‚¹ | èª¬æ˜ |
|---------|------|------|
| GET | /version | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª |
| POST | /generate | ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ (éä½¿ç”¨) |
| POST | /chat | ãƒãƒ£ãƒƒãƒˆç”Ÿæˆ (ä½¿ç”¨ä¸­) |
| POST | /embeddings | åŸ‹ã‚è¾¼ã¿ç”Ÿæˆï¼ˆRAGã§ä½¿ç”¨ï¼‰ |

**ãƒãƒ£ãƒƒãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ** (ollama-python):
```python
ollama.chat(
    model="gemma3:1b",
    messages=[{"role": "user", "content": prompt}]
)
```

---

## 7. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 7.1 TypeScriptå‹å®šç¾© (ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰)

```typescript
// å®Ÿé¨“ãƒ•ã‚§ãƒ¼ã‚º
type ExperimentPhase =
    | 'CONSENT'
    | 'INSTRUCTION'
    | 'SESSION_FREE_CHAT'
    | 'SESSION_KNOWLEDGE_PROBE'
    | 'SESSION_MORAL_CHOICE'
    | 'SESSION_STYLISTIC'
    | 'EVALUATION'
    | 'DEBRIEFING';

// å®Ÿé¨“æ¡ä»¶
type Condition = 'G' | 'P';

// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
interface Message {
    id: string;
    role: 'user' | 'assistant';
    content: string;
    timestamp: number;
}

// ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿
interface SessionData {
    messages: Message[];
    duration: number;
}

// è©•ä¾¡ãƒ‡ãƒ¼ã‚¿
interface EvaluationData {
    identity: number;      // 1-7
    naturalness: number;   // 1-7
    offensiveness: number; // 1-7
    comments?: string;
}

// å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿å…¨ä½“
interface ExperimentData {
    condition: Condition;
    startTime: number;
    endTime?: number;
    sessions: Partial<Record<ExperimentPhase, SessionData>>;
    evaluation?: EvaluationData;
}
```

### 7.2 Pythonå‹å®šç¾© (ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰)

```python
from dataclasses import dataclass
from datetime import datetime
from typing import Dict, List, Any, Optional

@dataclass
class LifelogEntry:
    id: str
    title: str
    start_time: datetime
    end_time: datetime
    is_starred: bool
    updated_at: datetime
    markdown: Optional[str]
    contents: List[Dict[str, Any]]

# ä¼šè©±å±¥æ­´ã‚¨ãƒ³ãƒˆãƒª
class ConversationEntry(TypedDict):
    user: str
    agent: str
    timestamp: str

# æ€è€ƒè¨˜éŒ²ã‚¨ãƒ³ãƒˆãƒª
class ThoughtEntry(TypedDict):
    timestamp: str
    category: str
    content: str

# AIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼
class AIParameters(TypedDict):
    temperature: float       # 0.0-2.0
    top_p: float            # 0.0-1.0
    presence_penalty: float  # -2.0-2.0
    frequency_penalty: float # -2.0-2.0
    num_ctx: int            # 1024-4096
    repeat_penalty: float    # 1.0-2.0
    mirostat_mode: int      # 0-2
    max_tokens: int         # 500-2000
    jargon_level: int       # 1-5
    formality_level: int    # 1-5
    abstraction_level: int  # 1-5
```

---

## 8. è¨­å®šãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼

### 8.1 ç¦äº•è–AIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼.json

**ãƒ•ã‚¡ã‚¤ãƒ«**: `cloneAI/ç¦äº•è–AIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼.json`

```json
{
    "temperature": 1.41,
    "top_p": 0.9,
    "presence_penalty": 0.76,
    "frequency_penalty": 0.6,
    "jargon_level": 4,
    "formality_level": 5,
    "abstraction_level": 2
}
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼è§£èª¬**:

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ | å€¤ | è§£èª¬ |
|------------|-----|------|
| temperature | 1.41 | é«˜ã‚: å‰µé€ çš„ã§äºˆæ¸¬ä¸å¯èƒ½ãªå¿œç­”ã‚’ç”Ÿæˆ |
| top_p | 0.9 | é«˜ã‚: å¤šæ§˜ãªèªå½™é¸æŠ |
| presence_penalty | 0.76 | ä¸­é«˜: è©±é¡Œã®ç¹°ã‚Šè¿”ã—ã‚’é©åº¦ã«é¿ã‘ã‚‹ |
| frequency_penalty | 0.6 | ä¸­: å˜èªã®ç¹°ã‚Šè¿”ã—ã‚’é©åº¦ã«é¿ã‘ã‚‹ |
| jargon_level | 4 | ã‚„ã‚„é«˜: é©åº¦ã«å°‚é–€ç”¨èªã‚’ä½¿ç”¨ |
| formality_level | 5 | é«˜: ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãªè¡¨ç¾ |
| abstraction_level | 2 | ä½: å…·ä½“ä¾‹ã‚’å¤šç”¨ |

### 8.2 ç’°å¢ƒå¤‰æ•°

**cloneAI**:
```bash
LIMITLESS_API_KEY=sk-xxxxx    # Limitless API ã‚­ãƒ¼
OLLAMA_HOST=http://127.0.0.1:11434  # ä»»æ„: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ localhost
```

**experiment-ui**:
```bash
OLLAMA_HOST=http://127.0.0.1:11434
OLLAMA_CHAT_MODEL=gemma3:1b
OLLAMA_EMBED_MODEL=nomic-embed-text
```

### 8.3 Next.jsè¨­å®š (next.config.ts)

```typescript
// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ä½¿ç”¨
```

### 8.4 TypeScriptè¨­å®š (tsconfig.json)

```json
{
    "compilerOptions": {
        "target": "ES2017",
        "lib": ["dom", "dom.iterable", "esnext"],
        "strict": true,
        "moduleResolution": "bundler",
        "jsx": "react-jsx",
        "paths": {
            "@/*": ["./src/*"]
        }
    }
}
```

---

## 9. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 9.1 Pythonãƒ†ã‚¹ãƒˆ (pytest)

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `cloneAI/tests/test_lifelog_client.py`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:

| ãƒ†ã‚¹ãƒˆå | æ¤œè¨¼å†…å®¹ |
|---------|---------|
| `test_client_requires_api_key` | APIã‚­ãƒ¼æœªæŒ‡å®šæ™‚ã«ValueError |
| `test_sends_api_key_header` | X-API-Keyãƒ˜ãƒƒãƒ€ãƒ¼ãŒæ­£ã—ãé€ä¿¡ã•ã‚Œã‚‹ |
| `test_builds_query_parameters` | ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒæ­£ã—ãæ§‹ç¯‰ã•ã‚Œã‚‹ |
| `test_parses_lifelog_entries` | JSONãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒæ­£ã—ããƒ‘ãƒ¼ã‚¹ã•ã‚Œã‚‹ |
| `test_handles_rate_limit_error` | 429ã‚¨ãƒ©ãƒ¼ãŒé©åˆ‡ã«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ |
| `test_handles_generic_api_error` | ä¸€èˆ¬çš„ãªAPIã‚¨ãƒ©ãƒ¼ãŒãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ |

**ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**:
```bash
cd cloneAI
python -m pytest
```

### 9.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ

**ç¾çŠ¶**: æœªå®Ÿè£…

**æ¨å¥¨ãƒ†ã‚¹ãƒˆæˆ¦ç•¥**:
- Jest + React Testing Library
- Cypress E2Eãƒ†ã‚¹ãƒˆ

---

## 10. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### 10.1 é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### cloneAI

```powershell
# ä»®æƒ³ç’°å¢ƒã®æœ‰åŠ¹åŒ–
C:\Users\shofu\Desktop\å’ç ”\cloneAI\venv\Scripts\Activate.ps1

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# Ollamaã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
ollama serve

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ
python clone_agentAI.py --interactive

# ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãƒãƒ¥ãƒ¼ãƒŠãƒ¼èµ·å‹•
python chat_param_test.py
```

#### experiment-ui

```powershell
cd experiment-ui

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm start
```

### 10.2 æœ¬ç•ªç’°å¢ƒ

**æ¨å¥¨æ§‹æˆ**:
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: Vercel (Next.jsæœ€é©)
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: Docker + AWS/GCP

---

## 11. æ ¡é–²ãƒ»æ¤œè¨¼çµæœ

### 11.1 ã‚³ãƒ¼ãƒ‰æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯

#### âœ… ç¢ºèªæ¸ˆã¿é …ç›®

| ã‚«ãƒ†ã‚´ãƒª | é …ç›® | çµæœ |
|---------|------|------|
| å‹å®šç¾© | ExperimentPhaseå®šç¾©ã¨ä½¿ç”¨ç®‡æ‰€ | ä¸€è‡´ |
| å‹å®šç¾© | Messageå‹ã®æ§‹é€  | ä¸€è‡´ |
| å‹å®šç¾© | Conditionå‹ ('G' \| 'P') | ä¸€è‡´ |
| API | Limitless APIãƒ˜ãƒƒãƒ€ãƒ¼ (X-API-Key) | ä¸€è‡´ |
| API | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° (429, 500) | å®Ÿè£…æ¸ˆã¿ |
| UI | ãƒ•ã‚§ãƒ¼ã‚ºé·ç§»é †åº | æ­£ã—ã„ |
| UI | è©•ä¾¡ã‚¹ã‚±ãƒ¼ãƒ« (1-7) | æ­£ã—ã„ |

#### âš ï¸ æ³¨æ„äº‹é …ãƒ»æ”¹å–„æ¨å¥¨

| é …ç›® | ç¾çŠ¶ | æ¨å¥¨ |
|-----|------|------|
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ¥ç¶š | ãƒ¢ãƒƒã‚¯å¿œç­” | cloneAIã¨ã®æ¥ç¶šå®Ÿè£… |
| ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“è¨ˆæ¸¬ | æœªå®Ÿè£… (`duration: 0`) | é–‹å§‹/çµ‚äº†æ™‚åˆ»ã‹ã‚‰è¨ˆç®— |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | åŸºæœ¬çš„ | ã‚ˆã‚Šè©³ç´°ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ |
| ãƒ†ã‚¹ãƒˆ | Pythonã®ã¿ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆè¿½åŠ  |
| å›½éš›åŒ– | æ—¥æœ¬èªå›ºå®š | i18nå¯¾å¿œæ¤œè¨ |

### 11.2 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºèª

| é …ç›® | è©•ä¾¡ | ã‚³ãƒ¡ãƒ³ãƒˆ |
|-----|------|---------|
| APIã‚­ãƒ¼ç®¡ç† | âš ï¸ | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰é€ä¿¡ã€ã‚µãƒ¼ãƒãƒ¼ä¿å­˜ãªã— |
| ãƒ‡ãƒ¼ã‚¿ä¿å­˜ | âœ… | ãƒ­ãƒ¼ã‚«ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã®ã¿ |
| å…¥åŠ›æ¤œè¨¼ | âš ï¸ | è¿½åŠ æ¤œè¨¼æ¨å¥¨ |
| XSSå¯¾ç­– | âœ… | Reactè‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ— |

### 11.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª

| é …ç›® | è©•ä¾¡ | ã‚³ãƒ¡ãƒ³ãƒˆ |
|-----|------|---------|
| åˆæœŸãƒ­ãƒ¼ãƒ‰ | âœ… | Next.js SSG/SSRæœ€é©åŒ– |
| ãƒãƒ£ãƒƒãƒˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ | âš ï¸ | ãƒ¢ãƒƒã‚¯3-5ç§’ã€å®Ÿè£…æ™‚è¦èª¿æ•´ |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨ | âœ… | å±¥æ­´åˆ¶é™ã‚ã‚Š (max_history=10) |

### 11.4 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨å®Ÿè£…ã®å·®ç•°

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¨˜è¼‰ | å®Ÿè£…çŠ¶æ³ | å¯¾å¿œ |
|----------------|---------|------|
| 4ã¤ã®ãƒãƒ£ãƒƒãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ | âœ… å®Ÿè£…æ¸ˆã¿ | - |
| æ¡ä»¶ãƒ©ãƒ³ãƒ€ãƒ å‰²ã‚Šå½“ã¦ | âœ… å®Ÿè£…æ¸ˆã¿ | - |
| 7æ®µéšè©•ä¾¡ | âœ… å®Ÿè£…æ¸ˆã¿ | - |
| JSONãƒ‡ãƒ¼ã‚¿ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ | âœ… å®Ÿè£…æ¸ˆã¿ | - |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é€£æº | âŒ æœªå®Ÿè£… | TODO: APIæ¥ç¶š |
| ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“è¨˜éŒ² | âš ï¸ éƒ¨åˆ†å®Ÿè£… | TODO: è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ |

### 11.5 ç™ºè¦‹ã•ã‚ŒãŸå®Ÿè£…ä¸Šã®èª²é¡Œ

#### 11.5.1 TODOã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ« | è¡Œ | å†…å®¹ |
|---------|-----|------|
| `experiment-ui/src/app/page.tsx` | 35 | `duration: 0 // TODO: Calculate duration` |
| `experiment-ui/src/components/ExperimentFlow.tsx` | 242 | `content: \`(Mock Response...)\` // TODO: Connect to backend` |

#### 11.5.2 é–¢æ•°åã¨å®Ÿè£…ã®ä¸æ•´åˆ

| é …ç›® | å•é¡Œ | å½±éŸ¿ |
|-----|------|------|
| `create_yamada_taro_persona()` | é–¢æ•°åãŒã€Œå±±ç”°å¤ªéƒã€ã ãŒã€å®Ÿéš›ã¯ã€Œç¦äº•è–ã€ã®ãƒšãƒ«ã‚½ãƒŠã‚’è¿”ã™ | å¯èª­æ€§ä½ä¸‹ã€è¦ãƒªãƒãƒ¼ãƒ  |

**ä¿®æ­£æ¨å¥¨**:
```python
# Before
def create_yamada_taro_persona() -> PersonaTemplate:

# After  
def create_fukui_hijiri_persona() -> PersonaTemplate:
```

#### 11.5.3 æœªå®Ÿè£…æ©Ÿèƒ½

| æ©Ÿèƒ½ | ç¾çŠ¶ | å„ªå…ˆåº¦ |
|-----|------|-------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰â†”ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é€£æº | ãƒ¢ãƒƒã‚¯å¿œç­”ã®ã¿ | **é«˜** |
| ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“è¨ˆæ¸¬ | `duration: 0` å›ºå®š | ä¸­ |
| ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼ | åŸºæœ¬çš„ãªtry-catch | ä¸­ |
| ãƒ­ã‚°åé›†ãƒ»åˆ†æåŸºç›¤ | æœªå®Ÿè£… | ä½ |
| å¤šè¨€èªå¯¾å¿œ | æ—¥æœ¬èªå›ºå®š | ä½ |

#### 11.5.4 ã‚³ãƒ¼ãƒ‰å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹

| ãƒ•ã‚¡ã‚¤ãƒ« | è¡Œæ•° | è¤‡é›‘åº¦ | ã‚³ãƒ¡ãƒ³ãƒˆ |
|---------|-----|-------|---------|
| clone_agentAI.py | 645 | ä¸­ | ä¸»è¦ãƒ­ã‚¸ãƒƒã‚¯é›†ä¸­ã€åˆ†å‰²æ¨å¥¨ |
| chat_param_test.py | 641 | é«˜ | GUI+ãƒ­ã‚¸ãƒƒã‚¯æ··åœ¨ã€åˆ†é›¢æ¨å¥¨ |
| ExperimentFlow.tsx | 266 | ä¸­ | é©åˆ‡ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰² |
| lifelog_client.py | 205 | ä½ | è‰¯å¥½ãªæ§‹é€  |

### 11.6 æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒªã‚¹ãƒˆ

#### å³æ™‚å¯¾å¿œï¼ˆå®Ÿé¨“å®Ÿæ–½å‰ã«å¿…é ˆï¼‰

1. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIæ¥ç¶šå®Ÿè£…**
   - Next.js API Routeã‹ã‚‰Pythonãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¸ã®æ¥ç¶š
   - æ¡ä»¶G/Pã«å¿œã˜ãŸAIå¿œç­”ã®åˆ‡ã‚Šæ›¿ãˆ

2. **ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“è¨ˆæ¸¬ã®å®Ÿè£…**
   ```typescript
   // page.tsx ä¿®æ­£æ¡ˆ
   const sessionStartTime = useRef<number>(0);
   
   useEffect(() => {
       if (phase.startsWith('SESSION_')) {
           sessionStartTime.current = Date.now();
       }
   }, [phase]);
   
   const handlePhaseComplete = (phaseData) => {
       const duration = Date.now() - sessionStartTime.current;
       // ...
   };
   ```

#### ä¸­æœŸå¯¾å¿œï¼ˆå®Ÿé¨“å“è³ªå‘ä¸Šï¼‰

3. **é–¢æ•°åãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**
   - `create_yamada_taro_persona` â†’ `create_fukui_hijiri_persona`

4. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆè¿½åŠ **
   - Jestã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
   - E2Eãƒ†ã‚¹ãƒˆï¼ˆCypressï¼‰

5. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–**
   - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒªãƒˆãƒ©ã‚¤
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®æ˜ç¢ºãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

#### é•·æœŸå¯¾å¿œï¼ˆç ”ç©¶æ‹¡å¼µï¼‰

6. **ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰**
   - å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•é›†è¨ˆ
   - çµ±è¨ˆåˆ†æãƒ„ãƒ¼ãƒ«é€£æº

7. **A/Bãƒ†ã‚¹ãƒˆæ©Ÿèƒ½å¼·åŒ–**
   - ã‚ˆã‚Šç´°ã‹ã„æ¡ä»¶åˆ†å²
   - å¤šè…•ãƒãƒ³ãƒ‡ã‚£ãƒƒãƒˆå¯¾å¿œ

---

## ä»˜éŒ²

### A. ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

```
å’ç ”/
â”œâ”€â”€ SYSTEM_DESIGN_DOCUMENT.md  # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ cloneAI/
â”‚   â”œâ”€â”€ clone_agentAI.py       # 645è¡Œ
â”‚   â”œâ”€â”€ chat_param_test.py     # 641è¡Œ
â”‚   â”œâ”€â”€ ç¦äº•è–AIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼.json  # 8è¡Œ
â”‚   â”œâ”€â”€ requirements.txt       # 6è¡Œ
â”‚   â”œâ”€â”€ README.md              # 40è¡Œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ limitless_api/
â”‚   â”‚       â”œâ”€â”€ __init__.py    # 3è¡Œ
â”‚   â”‚       â””â”€â”€ lifelog_client.py  # 205è¡Œ
â”‚   â””â”€â”€ tests/
â”‚       â”œâ”€â”€ conftest.py        # 12è¡Œ
â”‚       â”œâ”€â”€ test_lifelog_client.py  # 82è¡Œ
â”‚       â””â”€â”€ data/
â”‚           â””â”€â”€ lifelogs_sample.json  # 24è¡Œ
â””â”€â”€ experiment-ui/
    â”œâ”€â”€ package.json           # 30è¡Œ
    â”œâ”€â”€ tsconfig.json          # 34è¡Œ
    â””â”€â”€ src/
        â”œâ”€â”€ app/
        â”‚   â”œâ”€â”€ globals.css    # 48è¡Œ
        â”‚   â”œâ”€â”€ layout.tsx     # 32è¡Œ
        â”‚   â”œâ”€â”€ page.tsx       # 83è¡Œ
        â”‚   â”œâ”€â”€ api/limitless/route.ts  # 33è¡Œ
        â”‚   â””â”€â”€ limitless-test/page.tsx  # 74è¡Œ
        â”œâ”€â”€ components/
        â”‚   â”œâ”€â”€ ChatInterface.tsx  # 112è¡Œ
        â”‚   â””â”€â”€ ExperimentFlow.tsx # 266è¡Œ
        â””â”€â”€ lib/
            â”œâ”€â”€ experiment-state.ts  # 54è¡Œ
            â””â”€â”€ utils.ts           # 6è¡Œ
```

### B. ä¾å­˜é–¢ä¿‚

**cloneAI (Python)**:
- requests >= 2.32.0
- pytest >= 8.2.0
- requests-mock >= 1.12.0
- ollama (pip install ollama)
- fastapi
- uvicorn[standard]

**experiment-ui (Node.js)**:
- next: 16.0.8
- react: 19.2.0
- react-dom: 19.2.0
- clsx: ^2.1.1
- lucide-react: ^0.554.0
- tailwind-merge: ^3.4.0
- tailwindcss: ^4
- typescript: ^5

### C. ç”¨èªé›†

| ç”¨èª | å®šç¾© |
|-----|------|
| Condition G | Generic - æ±ç”¨çš„ãªAIï¼ˆæ¯”è¼ƒå¯¾ç…§ç¾¤ï¼‰ |
| Condition P | Personalized - ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸAIï¼ˆå®Ÿé¨“ç¾¤ï¼‰ |
| Identity | ã€Œæœ¬äººã‚‰ã—ã•ã€ã®è©•ä¾¡æŒ‡æ¨™ |
| Naturalness | ã€Œè‡ªç„¶ã•ã€ã®è©•ä¾¡æŒ‡æ¨™ |
| Offensiveness | ã€Œä¸å¿«æ„Ÿã€ã®è©•ä¾¡æŒ‡æ¨™ |
| Lifelog | Limitless APIã‹ã‚‰å–å¾—ã™ã‚‹ç”Ÿæ´»è¨˜éŒ² |
| Persona | AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®äººæ ¼è¨­å®š |
| ThoughtFlow | AIã®æ€è€ƒéç¨‹ã‚’å¯è¦–åŒ–ã™ã‚‹ä»•çµ„ã¿ |

---

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆæ—¥**: 2025å¹´12æœˆ9æ—¥  
**æœ€çµ‚æ›´æ–°**: 2025å¹´12æœˆ9æ—¥  
**ä½œæˆè€…**: GitHub Copilot (Claude Opus 4.5)  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
